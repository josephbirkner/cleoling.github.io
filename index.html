<html>
	<!-- "THOU SHALT SCROLL IN PURSUIT OF ANSWERS"- The Web -->
	<head>
		<title>Interlingual Connections on the Web</title>
		<script type="text/javascript">
			var ulangs = 'de,en,fr,pl,ru,nl,tr,zh-cn,vi';
			var ulangx = 'German,English,French,Polish,Russian,Dutch,Turkish,Simplified Chinese,Vietnamese';
		</script>
		<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
		<script type="text/javascript" src="dataProcessor.js"></script>
		<script type="text/javascript" src="biweightedCircularGraph.js"></script>
		<link rel="stylesheet" href="style.css">
		<style>
			/* Responsive layout for orb and table */
			@media (max-width: 1200px) {
				#orb-container, #table-container {
					flex: 1 1 100% !important;
					max-width: 100% !important;
				}
			}
		</style>
		<meta name="keywords" content="Computational, Interlingual, Connections, Link, Map">
		<meta charset="UTF-8">
		<meta name="author" content="Tillmann Doenicke" >
		<script type="text/javascript">
			// Smooth scrolling for navigation links
			$(document).ready(function() {
				$('.smoothScroll').click(function(e) {
					e.preventDefault();
					var target = $(this).attr('href');
					if (target && target !== '') {
						$('html, body').animate({
							scrollTop: $(target).offset().top
						}, 800);
					}
					return false;
				});
			});
		</script>
		<script type="text/javascript">
			$(function() {
				// Stick the #nav to the top of the window
				var nav = $('#navWrap');
				var navHomeY = nav.offset().top;
				var isFixed = false;
				var $w = $(window);
				$w.scroll(function() {
					var scrollTop = $w.scrollTop();
					var shouldBeFixed = scrollTop > navHomeY;
					if (shouldBeFixed && !isFixed) {
						nav.css({
							position: 'fixed',
							top: 0
						});
						isFixed = true;
						$('#content-separator').css('height', $('#navWrap').outerHeight()+'px');
					}
					else if (!shouldBeFixed && isFixed){
						nav.css({position: 'static'});
						isFixed = false;
						$('#content-separator').css('height', '0px');
					}
				});
			});
		</script>
		<!-- BEGIN Third Party Code -->
		<script type="text/javascript" src="jquery.tokeninput.js"></script>
		<link rel="stylesheet" type="text/css" href="token-input.css" />
		<script type="text/javascript">
			$(document).ready(function () {
				// Initialize data processor
				window.dataProcessor.init().then(function() {
					// Setup token input with local data - tokenInput expects a URL or array
					$("#my-text-input").tokenInput(window.dataProcessor.languages || [], {
						preventDuplicates: true,
						onAdd: function(item) {
							// Update ulangs when languages are added
							updateSelectedLanguages();
						},
						onDelete: function(item) {
							// Update ulangs when languages are removed
							updateSelectedLanguages();
						},
						hintText: "Type a language name",
						noResultsText: "No languages found",
						searchingText: "Searching..."
					});
					
					// Initial chart and table draw
					redrawChartAndTable();
				});
			});
			
			function updateSelectedLanguages() {
				const tokens = $("#my-text-input").tokenInput("get");
				if (tokens && tokens.length > 0) {
					ulangs = tokens.map(t => t.id).join(',');
				} else {
					// If no languages selected, use default
					ulangs = 'de,en,fr,pl,ru,nl,tr,zh-cn,vi';
				}
				redrawChartAndTable();
			}
		</script>
		<!-- END Third Party Code -->
		<script type="text/javascript">
			
			function resizeOrb() {
				const container = document.getElementById('orb-container');
				const canvas = document.getElementById('c');
				if (container && canvas) {
					// Get the container width, accounting for padding
					const containerWidth = container.offsetWidth - 40;
					// Adjust max size based on screen width
					const maxSize = window.innerWidth > 1200 ? 700 : window.innerWidth - 60;
					const size = Math.min(containerWidth, maxSize);
					
					canvas.width = size;
					canvas.height = size;
					
					// Redraw the chart with new dimensions
					if (window.dataProcessor && window.dataProcessor.geodata) {
						const chartData = window.dataProcessor.getChartData(ulangs);
						if (chartData && chartData.length > 0) {
							const center = size / 2;
							const radius = (size / 2) - 50; // Leave some margin
							drawCircularChart(canvas, 10, 30, [center, center], radius, chartData);
						}
					}
				}
			}
			
			function redrawChartAndTable() {
				// Ensure data processor is initialized
				if (!window.dataProcessor.geodata) {
					console.log('Waiting for data to load...');
					setTimeout(redrawChartAndTable, 100);
					return;
				}
				
				// Resize and draw the orb
				resizeOrb();
				
				// Get table HTML using the data processor
				const tableHTML = window.dataProcessor.getTableHTML(ulangs);
				document.getElementById("responseFrame").innerHTML = tableHTML;
			}
			
			$(document).ready(function(){
				// resize the canvas to fill browser window dynamically
				let resizeTimer;
				window.addEventListener('resize', function () {
					document.getElementById('navWrap').style.width = "100%";
					
					// Debounce the orb resize to avoid too many redraws
					clearTimeout(resizeTimer);
					resizeTimer = setTimeout(function() {
						resizeOrb();
					}, 250);
				});
			});
		</script>
	</head>
	<body>
		<div id="header">
			<h1 align='center'>Interlingual Connections on the Web</h1>
			<h4 align='center'>Who's linking to whom, about what, where, in which language?</h4>
			<div id="navWrap">
				<div id="nav">
					<ul class="site-menu">
						<li><a href="" class="smoothScroll">Top</a></li>
						<li><a href="#horb" class="smoothScroll">Orb</a></li>
						<li><a href="#htable" class="smoothScroll">Table</a></li>
						<li><a href="#hcode" class="smoothScroll">Code</a></li>
						<li><a href="#habout" class="smoothScroll">About</a></li>
					</ul>
					<br>
					<div>
						<input type="text" id="my-text-input" name="languages" />
					</div>
				</div>
			</div>
		</div>
		<div id='content-separator'></div>
		<div style="display: flex; flex-wrap: wrap; align-items: flex-start; margin: 0 10px; gap: 10px;">
		<div class="separable-section" id="orb-container" style="flex: 1 1 45%; min-width: 350px;">
			<h2 class='section-headline' id="horb">Orb</h2>
			<div align="center" style="width: 100%;">
				<canvas id="c" />
			</div>
		</div>
		<div class="separable-section" id="table-container" style="flex: 1 1 45%; min-width: 350px;">
			<h2 class='section-headline' id="htable">Raw Data</h2>
			<div id="responseFrame" style="width: 100%; overflow-x: auto; max-height: 700px; overflow-y: auto;"></div>
		</div>
		</div>
		<div class="separable-section" style="width: calc(100% - 40px);">
			<h2 class='section-headline' id="hcode">Code</h2>
			<p>The source code for this project is available on GitHub:</p>
			<p><a href="https://github.com/josephbirkner/cleoling" target="_blank" style="font-size: 1.2em;">
				ðŸ“‚ github.com/josephbirkner/cleoling
			</a></p>
			<p>Feel free to explore, fork, and contribute!</p>
			
			<h2 class='section-headline' id="habout">About</h2>
			<h3>Authors</h3>
			<a href="http://josephbirkner.com/" target="_blank">Joseph Birkner</a> & <a href="http://tilly-doe.blogspot.de/" target="_blank">Tillmann DÃ¶nicke</a><br />
			Students of B. Sc. Natural Language Processing<br />
			<a href="http://www.ims.uni-stuttgart.de/index.en.html" target="_blank">Institute for Natural Language Processing (IMS)</a><br />
			<a href="http://www.uni-stuttgart.de/home/index.en.html" target="_blank">University of Stuttgart</a><br /><br />
			You can contact us via the following addresses:
			<ul>
				<li>joseph.birkner@ims.uni-stuttgart.de</li>
				<li>tillmann.doenicke@ims.uni-stuttgart.de</li>
				<li>info@cleoling.com</li>
			</ul>
			<h3>History</h3>
			<ul>
				<li>2015
					<ul>
						<li>January: The second annual Computational Linguistics Unconference (<a href="http://www.clunc.eu/" target="_blank">clunc</a>) took place in Stuttgart. After a one-night-programming shift we won the hackathon with our project titled <q>HackGeoLing</q>, which was the first prototype of this project. The hurrily created slides of the presentation you can download <a href="HackGeoLing.pdf" download>here</a>.</li>
						<li>March: After doing a Python course we wrote a totally new crawler which was originally in PHP to do not have encoding problems anymore.</li>
						<li>May: We worked out a new idea how to present the crawled data in a better way. After some mathematical discussions we created the orb, which does not have the countries-are-not-languages problem.</li>
						<li>June: We fought a battle against Ajax requests&mdash;and won! The orb got a logarithmic scale, because English always took too much scale place. <nobr>&mdash; &mdash;</nobr> The orb now has beautiful colours! Also one more thing: We can interactively display languages now! (Have a look at the new input bar in the menu.) <nobr>&mdash; &mdash;</nobr> We started working on advanced query expressions for our API.</li>
					</ul>
				</li>
				<li>2025
					<ul>
						<li>August: The project was migrated from PHP to JavaScript with strong help from Claude Opus 4.1.</li>
					</ul>
				</li>
			</ul>
			<!--<h3>Why <q>Cleopatra</q>?</h3>-->
			<h3>Thanks</h3>
			Our special credits go to:
			<ul>
				<li>1<sup>st</sup> language detector: <a href="https://pecl.php.net/package/TextCat" target="_blank">TextCat</a></li>
				<li>1<sup>st</sup> crawler: <a href="http://phpcrawl.cuab.de/" target="_blank">PHPCrawl</a>
				<li>2<sup>nd</sup> crawler: <a href="http://scrapy.org/" target="_blank">Scrapy</a>
				<li><a href="http://loopj.com/jquery-tokeninput/" target="_blank">jQuery Tokeninput</a> by <a href="http://loopj.com/" target="_blank">James Smith</a></li>
				<li><a href="http://www.ipligence.com/free-ip-database" target="_blank">IPligence Lite Free</a> by <a href="http://www.ipligence.com/" target="_blank">IPligence</a></li>
				<li><a href="http://www.clunc.eu/" target="_blank">clunc</a> by <a href="http://www.aexea.de/" target="_blank">Aexea</a></li>
			</ul>			
		</div>
	</body>
</html>
